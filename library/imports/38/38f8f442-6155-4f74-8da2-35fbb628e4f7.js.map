{"version":3,"sources":["assets\\scripts\\common\\managers\\AudioMgr.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import EventMgr from \"./EventMgr\";\nimport I18nMgr from \"./I18nMgr\";\nimport ResMgr from \"./ResourcesMgr\";\n\nconst {ccclass, property} = cc._decorator;\n\nvar FSX_NUM = 33;\n\n@ccclass\nexport default class AudioMgr extends cc.Component {\n\n\n    public static Instance: AudioMgr = null;\n\n    private xhr = null;\n\n    private isBgmMute: boolean = false;\n    private isFsxMute: boolean = false;\n    private isVideoSoundMute: boolean = false;\n    private bgmVolume: number = 1;\n    private fsxVolume: number = 1;\n\n    private bgmAudioSource: cc.AudioSource = null;\n    private fsxAudioSource: Array<cc.AudioSource> = [];\n    private currentAudioSource: number = 0;\n\n    /** 當前桌號 */\n    private tableId = null;\n    /** HTML聲音元素 */\n    public audioElement = null;\n    /** 現正播放中歌曲index */\n    // private nowRandomIndex = null;\n    // private nowRandomIndex = 1;\n    private nowRandomIndex = 0;\n    /** 現正播放歌曲Index */\n    private nowPlayingIndex = 0;\n\n\n    /** bgm最大數量 */\n    private maxBgm = null;\n\n    /** 儲存當前傳來的預設音樂列表 */ \n    public DefaultPlaylist = [];\n    /** 儲存當前客製化音樂列表 */\n    private CustomPlaylist = [];\n    /** 儲存localhost裡的音樂列表 */\n    private LocalPlaylist = [];\n\n\n    // 音樂播放器功能變數\n    public isLoopSingle: boolean = false;\n    // private isLoopWhole: boolean = true;\n    public isShuffle: boolean = false;\n    private bannedSongs = {};\n\n    /** 播放器是否暫停中 */\n    public isPlaying: boolean = true;\n\n\n    // --------------------------------------------------------------------------\n    /** 有在demo自定義裡Type裡的音效檔案名稱 */\n    private customTypeList = [];\n    /** 當前音效組類型 0=預設 */\n    private currentFsxType: number = 0;\n\n    // --------------------------------------------------------------------------\n    private EventMap = {\n        \"audio_tableId\": this.onAudioTableId,\n        \"res_get_music\": this.onGetServerMusicLists,\n        \"change_bgm_mute\": this.onChangeBgmMute,\n        // \"change_fsx_mute\": this.onChangeFsxMute,\n        \"comp_get_music\": this.onCompGetPlayList,\n        \"music_player_play\": this.onPlaySong,\n        \"music_player_pause\": this.onPauseSong,\n        \"music_player_next_song\": this.onNextSong,\n        \"music_player_prev_song\": this.onPrevSong,\n        \"music_player_change_status\": this.onChangePlayingStatus,\n        \"music_player_toggle_song\": this.onToggleSong,\n\n        \"sys:fsx_mute\": this.onChangeFsxMute,\n        \"sys:video_sound_mute\": this.onChangeVideoSoundMute,\n    }\n\n    // -------------------------------------------------------------------------------------\n    \n    onLoad () {\n\n        if (AudioMgr.Instance === null) {\n            AudioMgr.Instance = this;\n        } else {\n            cc.error(\"[error:] audio mgr has multi instances!!!\");\n            this.destroy();\n            console.log(\"[fix:] audio mgr has been destroyed.\");\n            return;\n        };\n\n        this.init();\n    }\n\n    start() {\n\n        for (let key in this.EventMap) {\n            EventMgr.Instance.addEventListener(key, this, this.EventMap[key]);\n        };\n\n        this.audioElement.onended = () => {\n            this.onBgmEnded();\n        };\n\n        this.create();\n    }\n\n    onDestroy() {\n        for (let key in this.EventMap) {\n            EventMgr.Instance.removeEventListener(key, this, this.EventMap[key]);\n        };\n    }\n\n    private init(): void {\n\n        // HTML audio元素\n        this.audioElement = document.getElementById(\"audio\");\n        if (!this.audioElement) {\n            this.audioElement = document.createElement(\"audio\");\n        };\n\n        // 讀取本地的參數\n        if (!localStorage.getItem(\"meta:baccarat:bgm_mute\")) {\n            this.isBgmMute = this.isBgmMute;\n            localStorage.setItem(\"meta:baccarat:bgm_mute\", JSON.stringify(this.isBgmMute));\n        } else {\n            let localItem = localStorage.getItem(\"meta:baccarat:bgm_mute\");\n            this.isBgmMute = JSON.parse(localItem);\n        };\n        // 遊戲音效\n        if (!localStorage.getItem(\"meta:baccarat:fsx_mute\")) {\n            this.isFsxMute = this.isFsxMute;\n            localStorage.setItem(\"meta:baccarat:fsx_mute\", JSON.stringify(this.isFsxMute));\n        } else {\n            let localItem = localStorage.getItem(\"meta:baccarat:fsx_mute\");\n            this.isFsxMute = JSON.parse(localItem);\n        };\n        // console.log(\"mute?\", this.isFsxMute);\n        // 視訊音效\n        if (!localStorage.getItem(\"meta:baccarat:video_sound_mute\")) {\n            this.isVideoSoundMute = this.isVideoSoundMute;\n            localStorage.setItem(\"meta:baccarat:video_sound_mute\", JSON.stringify(this.isVideoSoundMute));\n        } else {\n            let localItem = localStorage.getItem(\"meta:baccarat:video_sound_mute\");\n            this.isVideoSoundMute = JSON.parse(localItem);\n        };\n        //\n        this.bgmAudioSource = this.node.addComponent(cc.AudioSource);\n        this.bgmAudioSource.volume = this.bgmVolume;\n        for (let i = 0; i < FSX_NUM; i++) {\n            let as = this.node.addComponent(cc.AudioSource);\n            as.volume = this.fsxVolume;\n            if (this.isFsxMute) {\n                as.mute = true;\n            };\n            this.fsxAudioSource.push(as);\n        };\n        //\n        this.currentAudioSource = 0;\n        //\n        let isPlayingLocalData = localStorage.getItem(\"meta:baccarat:is_playing\");\n        if (!isPlayingLocalData) {\n            this.isPlaying = true;\n            localStorage.setItem(\"meta:baccarat:is_playing\", JSON.stringify(this.isPlaying));\n        } else if (isPlayingLocalData) {\n            this.isPlaying = JSON.parse(isPlayingLocalData);\n        };\n    }\n\n    private create(): void {\n        // 初始化播放器設定狀態\n        let settingsLocalData = JSON.parse(localStorage.getItem(\"musicPlayerSettings\"));\n        if (!settingsLocalData) {\n            this.isLoopSingle = false;\n            // this.isLoopWhole = true;\n            this.isShuffle = false;\n        } else if (settingsLocalData) {\n            this.isLoopSingle = settingsLocalData[\"isLoopSingle\"];\n            // this.isLoopWhole = localData[\"isLoopWhole\"];\n            this.isShuffle = settingsLocalData[\"isShuffle\"];\n        };\n\n        if (this.isBgmMute) {\n            this.audioElement.volume = 0.0;\n        } else if (!this.isBgmMute) {\n            this.audioElement.volume = 1.0;\n        };\n    }\n\n    /** 取得音樂列表 */\n    public getServerMusicLists(): void {\n        // 照介面語系取\n        let customLang = \"\";\n        let nowLanguage = I18nMgr.Instance.nowLanguage;\n        if (nowLanguage == \"zh_tw\") {\n            customLang = \"zh-tw\"\n        } else if (nowLanguage == \"zh_cn\") {\n            customLang = \"zh-cn\"\n        } else {\n            customLang = nowLanguage;\n        };\n    }\n\n    /** 監聽取得音樂列表資料 */\n    public onGetServerMusicLists(eventName, data): void {\n        // console.log(\"獲取音樂列表: \", data);\n        let list = data[\"data\"];\n        this.DefaultPlaylist = list;\n        this.CustomPlaylist = [];\n        //\n        let songsStatusLocalData = JSON.parse(localStorage.getItem(\"songsStatus\"));\n        if (!songsStatusLocalData) {\n            this.CustomPlaylist = this.DefaultPlaylist;\n\n            this.DefaultPlaylist.forEach(item => {\n                item[\"active\"] = true;\n            });\n\n            this.CustomPlaylist.forEach(item => {\n                item[\"active\"] = true;\n            });\n\n            localStorage.setItem(\"songsStatus\", JSON.stringify(this.DefaultPlaylist));\n        }\n        // 對比資料音樂清單與local音樂清單, 交叉比對出客製化播放清單 (customPlaylist)\n        else if (songsStatusLocalData) {\n            this.DefaultPlaylist.forEach(item => {\n                item[\"active\"] = true;\n            });\n            this.DefaultPlaylist.forEach (item => {\n                let hasSet = false;\n                songsStatusLocalData.forEach(local => {\n                    if (item[\"name\"] == local[\"name\"]) {\n                        hasSet = true;\n                        item[\"active\"] = local[\"active\"];\n                    };\n                });\n                if (!hasSet) {\n                    songsStatusLocalData.push(item);\n                };\n                if (item[\"active\"]) {\n                    this.CustomPlaylist.push(item);\n                };\n            });\n\n            localStorage.setItem(\"songsStatus\", JSON.stringify(songsStatusLocalData));\n            // console.log(\"###CustomPlaylist: \", this.CustomPlaylist);\n        };\n    }\n\n\n\n    public getBgmMute(): boolean {\n        return this.isBgmMute;\n    }\n\n    public setBgmMute(mute: boolean): void {\n        var value = (mute) ? true : false;\n        if (this.isBgmMute == value) { return; };\n\n        this.isBgmMute = value;\n        if (this.isBgmMute) {\n            // this.bgmAudioSource.mute = true;\n            // this.audioElement.volume = 0;\n            console.log(\"[Audio Mgr]: \", \"mute:\", this.audioElement.volume);\n            // this.audioElement.pause();\n            this.audioElement.volume = 0.0;\n        } \n        else {\n            // this.bgmAudioSource.mute = false;\n            // this.audioElement.volume = 1;\n            console.log(\"[Audio Mgr]: \", \"not mute:\", this.audioElement.volume);\n            // this.audioElement.play();\n            this.audioElement.volume = 1.0;\n        };\n\n        localStorage.setItem(\"meta:baccarat:bgm_mute\", JSON.stringify(value));\n    }\n\n    public getFsxVolume(): number {\n        return this.fsxVolume;\n    }\n\n    public setFsxVolume(value): void {\n        for(var i = 0; i < this.fsxAudioSource.length; i ++) {\n            this.fsxAudioSource[i].volume = value;\n        }\n\n        this.fsxVolume = value;\n        localStorage.setItem(\"fsxVolume\", JSON.stringify(value));\n    }\n\n    public getFsxMute(): boolean {\n        return this.isFsxMute;\n    }\n\n    public setFsxMute(mute: boolean): void {\n\n        var value = (mute) ? true : false;\n        if (this.isFsxMute == value) {\n            return;\n        };\n\n        this.isFsxMute = value;\n        this.fsxAudioSource.forEach(as => {\n            if (this.isFsxMute) {\n                as.mute = true;\n            } else {\n                as.mute = false;\n            };\n        });\n\n        localStorage.setItem(\"meta:baccarat:fsx_mute\", JSON.stringify(value));\n    }\n\n    public getVideoSoundMute(): boolean {\n        return this.isFsxMute;\n    }\n\n    public setVideoSoundMute(mute: boolean): void {\n\n        var value = (mute) ? true : false;\n        if (this.isVideoSoundMute == value) {\n            return;\n        };\n\n        this.isVideoSoundMute = value;\n\n        localStorage.setItem(\"meta:baccarat:video_sound_mute\", JSON.stringify(value));\n    }\n\n    public playBgm(url, loop) {\n        loop = (loop) ? true : false;\n        this.bgmAudioSource.loop = loop;\n        this.bgmAudioSource.clip = ResMgr.Instance.getAsset(\"audio\", url);\n        if (this.bgmAudioSource.clip) {\n            this.bgmAudioSource.play();\n        }\n        else {\n            cc.error(\"music audio clip null: \", url);\n        };\n    }\n\n    /** 監聽每桌入桌播放bgm */\n    public onAudioTableId(eventName, data): void {\n        this.tableId = data;\n    }\n\n    /** 播放網頁音樂(html+url) */\n    public playWebBgm(): void {\n        if (this.CustomPlaylist.length == 0) {\n            return;\n        };\n        // 重置url\n        this.audioElement.src = \"\";\n        // 讀取本地的參數\n        if (!localStorage.getItem(\"isBgmMute\")) {\n            this.isBgmMute = this.isBgmMute;\n            localStorage.setItem(\"isBgmMute\", JSON.stringify(this.isBgmMute));\n        } else {\n            let localItem = localStorage.getItem(\"isBgmMute\");\n            this.isBgmMute = JSON.parse(localItem);\n        };\n        //\n        let bgmUrl = this.CustomPlaylist[0].url;\n        console.log(\"[Audio Mgr]: \", \"bgmUrl:\", bgmUrl);\n        this.audioElement.src = bgmUrl;\n        if (this.isBgmMute) {\n            this.audioElement.pause();\n            this.isPlaying = false;\n            localStorage.setItem(\"musicIsPlaying\", JSON.stringify(this.isPlaying));\n        } else if (!this.isBgmMute) {\n            this.audioElement.play();\n            this.isPlaying = true;\n            localStorage.setItem(\"musicIsPlaying\", JSON.stringify(this.isPlaying));\n        };\n    }\n\n    public randomSelectBgm(): string {\n        // let windowConfig = window[\"TableBgmMax\"];\n        // this.maxBgm = windowConfig[this.tableId];\n        this.maxBgm = this.CustomPlaylist.length - 1;\n        let randomIndex  = Math.floor((Math.random() * this.maxBgm));\n        if (!this.nowPlayingIndex) {\n            this.nowPlayingIndex = randomIndex;\n        } else if (this.nowPlayingIndex) {\n            // 如果跟上一首一樣\n            if (this.CustomPlaylist.length == 1) {\n                this.nowPlayingIndex = this.nowPlayingIndex;\n            } else {\n                if (this.nowPlayingIndex == randomIndex) {\n                    if (this.nowPlayingIndex == this.maxBgm) {\n                        this.nowPlayingIndex = randomIndex - 1;\n                    } else {\n                        this.nowPlayingIndex = randomIndex + 1;\n                    };\n                }\n                // 跟上一首不一樣\n                else {\n                    this.nowPlayingIndex = randomIndex;\n                };\n            };\n\n        };\n        let selected = this.CustomPlaylist[this.nowPlayingIndex].url;\n        return selected;\n    }\n\n    public onBgmEnded(): void {\n        if (this.CustomPlaylist.length == 0) {\n            console.error(\"No selected song!\");\n            return;\n        };\n        // 重置url\n        this.audioElement.src = \"\";\n        // 讀取本地的參數\n        if (!localStorage.getItem(\"isBgmMute\")) {\n            this.isBgmMute = this.isBgmMute;\n            localStorage.setItem(\"isBgmMute\", JSON.stringify(this.isBgmMute));\n        } else {\n            let localItem = localStorage.getItem(\"isBgmMute\");\n            this.isBgmMute = JSON.parse(localItem);\n        };\n        //\n        // let bgmUrl = this.randomSelectBgm();\n        let bgmUrl;\n        if (this.isLoopSingle) {\n            bgmUrl = this.CustomPlaylist[this.nowPlayingIndex].url;;\n        } else if (!this.isLoopSingle) {\n            // 有開隨機\n            if (this.isShuffle) {\n                bgmUrl = this.randomSelectBgm();\n                // console.log(\"bgmUrl: \", bgmUrl);\n            }\n            // 沒開隨機\n            else if (!this.isShuffle) {\n                // 如果只有一首\n                if (this.CustomPlaylist.length == 1) {\n                    this.nowPlayingIndex = this.nowPlayingIndex;\n                }\n                // 如果有多首\n                else {\n                    this.nowPlayingIndex += 1;\n                    let length = this.CustomPlaylist.length - 1;\n                    this.nowPlayingIndex = (this.nowPlayingIndex > length) ? 0 : this.nowPlayingIndex;\n                };\n                bgmUrl = this.CustomPlaylist[this.nowPlayingIndex].url;\n            };\n        };\n        console.log(\"[Audio Mgr]: \", \"bgmUrl:\", bgmUrl);\n        this.audioElement.src = bgmUrl;\n\n        if (this.isBgmMute) {\n            this.audioElement.pause();\n            this.isPlaying = false;\n            localStorage.setItem(\"musicIsPlaying\", JSON.stringify(this.isPlaying));\n        } else if (!this.isBgmMute) {\n            this.audioElement.play();\n            this.isPlaying = true;\n            localStorage.setItem(\"musicIsPlaying\", JSON.stringify(this.isPlaying));\n        };\n    }\n\n    public stopBgm() {\n        this.bgmAudioSource.stop();\n    }\n\n    /** 停止網頁播放音樂 */\n    public stopWebBgm(): void {\n        this.audioElement.pause();\n        this.audioElement.currentTime = 0;\n        this.audioElement.src = \"\";\n    }\n\n    /** 播放音效 */\n    public playFsx(url): void {\n        var as = this.fsxAudioSource[this.currentAudioSource];\n        this.currentAudioSource ++;\n        if (this.currentAudioSource >= FSX_NUM) {\n            this.currentAudioSource = 0;\n        };\n\n        as.clip = ResMgr.Instance.getAsset(\"audio_fsx\", url);\n\n        if (as.clip) {\n            as.play();\n        }\n        else {\n            cc.error(\"effect audio clip null: \", url);\n        };\n    }\n\n    /** 播放語音 */\n    public playVoice(url): void {\n        var as = this.fsxAudioSource[this.currentAudioSource];\n        this.currentAudioSource ++;\n        if (this.currentAudioSource >= FSX_NUM) {\n            this.currentAudioSource = 0;\n        };\n\n        as.clip = ResMgr.Instance.getAsset(`audio_voice_${I18nMgr.Instance.nowLanguage}`, url);\n\n        if (as.clip) {\n            as.play();\n        }\n        else {\n            cc.error(\"effect audio clip null: \", url);\n        };\n    }\n\n\n    /** 監聽組件取得現在歌單 */\n    private onCompGetPlayList(eventName, data): void {\n        EventMgr.Instance.dispatchEvent(\"comp_dispatch_music\", this.DefaultPlaylist);\n    }\n\n    /** 監聽改變播放模式(循環/隨機)) */\n    private onChangePlayingStatus(eventName, data): void {\n        this.isLoopSingle = data[\"isLoopSingle\"];\n        this.isShuffle = data[\"isShuffle\"];\n        let set = {\n            isLoopSingle: this.isLoopSingle,\n            isShuffle: this.isShuffle\n        };\n        localStorage.setItem(\"musicPlayerSettings\", JSON.stringify(set));\n    }\n\n    /** 監聽開始播放音樂 */\n    private onPlaySong(eventName, data): void {\n        if (this.CustomPlaylist.length == 0) {\n            console.error(\"No selected song!\");\n            return;\n        };\n        let bgmUrl = this.CustomPlaylist[this.nowPlayingIndex].url;\n        this.audioElement.src = bgmUrl;\n\n        if (this.isBgmMute) {\n            this.audioElement.pause();\n            this.isPlaying = false;\n            localStorage.setItem(\"musicIsPlaying\", JSON.stringify(this.isPlaying));\n        } else if (!this.isBgmMute) {\n            this.audioElement.play();\n            this.isPlaying = true;\n            localStorage.setItem(\"musicIsPlaying\", JSON.stringify(this.isPlaying));\n        };\n    }\n\n    /** 監聽暫停播放音樂 */\n    private onPauseSong(eventName, data): void {\n        if (this.CustomPlaylist.length == 0) {\n            console.error(\"No selected song!\");\n            return;\n        };\n        this.isPlaying = false;\n        localStorage.setItem(\"musicIsPlaying\", JSON.stringify(this.isPlaying));\n        this.audioElement.pause();\n    }\n\n    /** 監聽播放下一首 */\n    private onNextSong(eventName, data): void {\n        if (this.CustomPlaylist.length == 0) {\n            console.error(\"No selected song!\");\n            return;\n        };\n        let bgmUrl;\n        if (this.isShuffle) {\n            bgmUrl = this.randomSelectBgm();\n        }\n        else if (!this.isShuffle) {\n            if (this.CustomPlaylist.length == 1) {\n                this.nowPlayingIndex = this.nowPlayingIndex;\n            } else {\n                this.nowPlayingIndex += 1;\n                let length = this.CustomPlaylist.length - 1;\n                this.nowPlayingIndex = (this.nowPlayingIndex > length) ? 0 : this.nowPlayingIndex;\n            };\n            bgmUrl = this.CustomPlaylist[this.nowPlayingIndex].url;\n        };\n        this.audioElement.src = bgmUrl;\n\n        if (this.isBgmMute) {\n            this.audioElement.pause();\n            this.isPlaying = false;\n            localStorage.setItem(\"musicIsPlaying\", JSON.stringify(this.isPlaying));\n        } else if (!this.isBgmMute) {\n            this.audioElement.play();\n            this.isPlaying = true;\n            localStorage.setItem(\"musicIsPlaying\", JSON.stringify(this.isPlaying));\n        };\n    }\n\n    /** 監聽播放前一首 */\n    private onPrevSong(eventName, data): void {\n        if (this.CustomPlaylist.length == 0) {\n            console.error(\"No selected song!\");\n            return;\n        };\n        let bgmUrl;\n        if (this.isShuffle) {\n            bgmUrl = this.randomSelectBgm();\n        }\n        else if (!this.isShuffle) {\n            if (this.CustomPlaylist.length == 1) {\n                this.nowPlayingIndex = this.nowPlayingIndex;\n            } else {\n                this.nowPlayingIndex -= 1;\n                this.nowPlayingIndex = (this.nowPlayingIndex < 0) ? (this.CustomPlaylist.length - 1) : this.nowPlayingIndex; \n            };\n            bgmUrl = this.CustomPlaylist[this.nowPlayingIndex].url;\n        };\n        this.audioElement.src = bgmUrl;\n\n        if (this.isBgmMute) {\n            this.audioElement.pause();\n            this.isPlaying = false;\n            localStorage.setItem(\"musicIsPlaying\", JSON.stringify(this.isPlaying));\n        } else if (!this.isBgmMute) {\n            this.audioElement.play();\n            this.isPlaying = true;\n            localStorage.setItem(\"musicIsPlaying\", JSON.stringify(this.isPlaying));\n        };\n    }\n\n    /** 監聽開啟/關閉選歌 */\n    private onToggleSong(eventName, data): void {\n        let dataName = data[\"name\"];\n        let dataActive = data[\"active\"];\n        let localCustomPlaylist = JSON.parse(localStorage.getItem(\"songsStatus\"));\n        //\n        if (dataActive) {\n            // 從DefaultList裡去遍歷並push到選中的該song到custom list\n            this.DefaultPlaylist.forEach(item => {\n                if (item[\"name\"] == dataName) {\n                    item[\"active\"] = true;\n                    this.CustomPlaylist.push(item);\n                };\n                localCustomPlaylist.forEach(local => {\n                    if (item[\"name\"] == local[\"name\"]) {\n                        local[\"active\"] = item[\"active\"];\n                    };\n                });\n            });\n        }\n        else if (!dataActive) {\n            // 從Custom list裡去遍歷到選中的song, slice掉\n            for (let i = 0; i < this.CustomPlaylist.length; i++) {\n                let item = this.CustomPlaylist[i];\n                if (item.name == dataName) {\n                    this.CustomPlaylist.splice(i, 1);\n                };\n            };\n            //\n            this.DefaultPlaylist.forEach(item => {\n                if (item[\"name\"] == dataName) {\n                    item[\"active\"] = false;\n                };\n                localCustomPlaylist.forEach(local => {\n                    if (item[\"name\"] == local[\"name\"]) {\n                        local[\"active\"] = item[\"active\"];\n                    };\n                });\n            });\n        };\n        //\n        localStorage.setItem(\"songsStatus\", JSON.stringify(localCustomPlaylist));\n    }\n\n\n\n    // --------------------------------------------------------------------------------------\n    private onChangeBgmMute(eventName, data): void {\n        this.setBgmMute(data);\n    }\n\n    private onChangeFsxMute(eventName, data): void {\n        this.setFsxMute(data);\n    }\n\n    private onChangeVideoSoundMute(eventName, data): void {\n        this.setVideoSoundMute(data);\n    }\n}\n"]}